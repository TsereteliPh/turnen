function get_siblings(t){var n=[];if(t.parentNode){let e=t.parentNode.firstChild;for(;e;)1===e.nodeType&&e!==t&&n.push(e),e=e.nextSibling}return n}function slideToggle(e){0===e.offsetHeight?e.style.maxHeight=e.scrollHeight+"px":e.style.maxHeight=0}function setHeaderScrollClass(){const e=document.querySelector(".header");window.addEventListener("scroll",function(){window.scrollY>=e.offsetHeight?e.classList.add("scroll"):e.classList.remove("scroll")})}function setTelMask(){[].forEach.call(document.querySelectorAll('[type="tel"]'),function(e){let c;function t(e){e.keyCode&&(c=e.keyCode),this.selectionStart<3&&e.preventDefault();let t="+7 (___) ___-__-__",n=0,i=t.replace(/\D/g,""),l=this.value.replace(/\D/g,""),s=t.replace(/[_\d]/g,function(e){return n<l.length?l.charAt(n++)||i.charAt(n):e});-1!=(n=s.indexOf("_"))&&(n<5&&(n=3),s=s.slice(0,n));var a=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(a=new RegExp("^"+a+"$")).test(this.value)||this.value.length<5||47<c&&c<58)&&(this.value=s),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)})}function sendForm(){document.querySelectorAll("form[name]").forEach(function(e){e.addEventListener("submit",function(e){e.preventDefault();e=this;let n=new FormData(e);var t=e.name,i=e.querySelector("input[type=file]"),l=e.querySelector("input[name=client_name]"),s=e.querySelector("input[name=client_tel]"),a=e.querySelector("input[name=client_email]"),e=e.querySelector("input[name=client_message]"),l=(l&&n.append("client_name",l.value),s&&n.append("client_tel",s.value),a&&n.append("client_email",a.value),e&&n.append("client_message",e.value),window.btoa("1b31cbdd-8d71-4616-85a6-92f5ab1c4f83:63e6ff22-9af0-4781-b338-308e46b14ceb"));n.append("action","send_mail"),console.log("Basic "+l),t&&(n.append("form_name",t),i&&Array.from(i.files).forEach((e,t)=>{n.append(t.toString(),e)}),fetch("https://w.fitness365.ru/api/v1/lead",{method:"POST",headers:{Authorization:"Basic "+l},body:{name:n.get("client_name"),email:n.get("client_email"),phone:n.get("client_tel"),message:n.get("client_message")}}).then(e=>e.text()).catch(e=>{console.error("Error:",e)}))})})}function tabs(){var e=document.querySelectorAll(".js-tabs");e&&e.forEach(function(e){var n;(n=e).addEventListener("click",function(e){var t=e.target.closest("li");t.classList.contains("active")&&t.parentNode.classList.toggle("open"),t.classList.contains("active")||e.target===n||(e=t,t=document.querySelector("#"+e.getAttribute("data-tab")),e.classList.add("active"),get_siblings(e).forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),get_siblings(t).forEach(function(e){e.classList.remove("active")}),e.parentNode.classList.remove("open"))})})}document.addEventListener("DOMContentLoaded",function(){setHeaderScrollClass(),sendForm(),setTelMask(),tabs()});try{Fancybox.bind("[data-fancybox]",{animated:!1})}catch(e){console.log(e)}const coaches=document.querySelector(".coaches"),thumbCoachesSwitcher=function(t,n){if(!(576<window.innerWidth))for(let e=0;e<t.slides.length;e++)e!==t.activeIndex?t.slides[e].classList.remove("swiper-slide-thumb-active"):(t.slides[e].classList.add("swiper-slide-thumb-active"),n.slideTo(e))};if(coaches){let e=new Swiper(".coaches__slider-wrapper",{spaceBetween:40,slidesPerView:1,watchSlidesProgress:!0,navigation:{nextEl:".coaches__slider-next",prevEl:".coaches__slider-prev"},pagination:{el:".coaches__slider-pagination",clickable:!0},breakpoints:{1280:{slidesPerView:4,spaceBetween:20},992:{slidesPerView:3},577:{slidesPerView:2}},on:{activeIndexChange:function(){thumbCoachesSwitcher(this,t)}}}),t=new Swiper(".coaches__person",{slidesPerView:1,effect:"fade",speed:500,spaceBetween:0,allowTouchMove:!1,thumbs:{swiper:e}}),n=coaches.querySelectorAll(".coaches__gallery-wrapper");n&&n.forEach(e=>{new Swiper(e,{spaceBetween:18,slidesPerView:1,navigation:{nextEl:e.parentNode.querySelector(".coaches__gallery-next"),prevEl:e.parentNode.querySelector(".coaches__gallery-prev")},breakpoints:{992:{slidesPerView:4},769:{slidesPerView:3},577:{slidesPerView:2}}})})}document.addEventListener("DOMContentLoaded",function(e){const n=document.querySelector(".header");if(n){const s=n.querySelector(".header__burger"),a=n.querySelector(".header__drop"),c=()=>{s.classList.remove("active"),a.style.maxHeight=0,document.body.style.overflow="visible"};var t,i,l;s.addEventListener("click",function(){this.classList.contains("active")?c():(s.classList.add("active"),a.style.maxHeight=a.scrollHeight+"px",document.body.style.overflow="hidden")}),n.classList.contains("header--index")&&(t=Array.from(n.querySelectorAll(".header__menu-item a")),i=Array.from(a.querySelectorAll(".header__drop-item a")),l=a.querySelector(".header__map"),t.concat(i,l).forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),c();var e=document.querySelector(this.getAttribute("href")).getBoundingClientRect().top,t=n.querySelector(".header__content").offsetHeight,e=e+window.scrollY-t;window.scrollTo({top:e,behavior:"smooth"})})}))}});const arrowBtns=document.querySelectorAll(".btn-arrow"),album=(arrowBtns&&arrowBtns.forEach(n=>{n.addEventListener("click",function(){let e=n.parentNode;n.classList.contains("js-scroll-next")&&(e=n.parentNode.nextElementSibling);var t=document.querySelector(".header__content").offsetHeight,t=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:t,behavior:"smooth"})})}),document.querySelector(".album"));if(album){const va=album.querySelector(".album__gallery--mobile"),wa=va.querySelectorAll(".gallery__link"),xa=album.querySelector(".album__load-more");if(window.innerWidth<=576){if(9<wa.length)for(let e=9;e<wa.length;e++)wa[e].style.display="none";else xa.style.display="none";xa.addEventListener("click",function(){for(let e=9;e<wa.length;e++)wa[e].style.display="flex";this.style.display="none"})}}if(coaches){const Aa=coaches.nextElementSibling;Aa.classList.contains("price")&&coaches.classList.add("coaches--half")}const price=document.querySelector(".price");if(price){const Ba=price.querySelectorAll(".js-accordion-btn"),Ca=()=>{for(var e of Ba)e.classList.remove("active"),e.nextElementSibling.style.maxHeight=0};Ba.forEach(e=>{e.addEventListener("click",function(){this.classList.contains("active")?Ca():(Ca(),this.classList.add("active"),slideToggle(this.nextElementSibling))})})}